<!--
        SOAP Test Fixtures for DSL Library Validation
        Covers: envelope prefixes, SOAP 1.1 & 1.2, headers, attributes,
        optional elements, nillable elements, lists, CDATA, raw XML,
        nested complex types, and both fault formats.
        -->


<!-- ═══════════════════════════════════════════════════════════════
     1. SOAP 1.1 — Full happy-path response (prefix: soapenv)
     ═══════════════════════════════════════════════════════════════ -->
<soapenv:Envelope
        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:ns="http://org.khorum-oss.com/ghost-book"
        xmlns:common="http://org.khorum-oss.com/common"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <soapenv:Header>
        <common:transactionId>txn-9f8a-4b21</common:transactionId>
        <common:routing soapenv:mustUnderstand="1" common:priority="high">us-east-1</common:routing>
        <common:sessionToken>eyJhbGciOiJSUzI1NiJ9.ghost-session</common:sessionToken>
    </soapenv:Header>

    <soapenv:Body>
        <ns:createGhostResponse>
            <ghost>
                <type>poltergeist</type>
                <name>The Grey Lady</name>
                <origin>Victorian Manor</origin>
                <hauntingScore>87.5</hauntingScore>
                <ability level="3">Telekinesis</ability>
                <ability level="7">Invisibility</ability>
                <ability level="1">Cold Spots</ability>
                <lastSighting>
                    <location>East Wing Corridor</location>
                    <timestamp>2025-01-15T03:42:00Z</timestamp>
                    <witnesses>
                        <witness>
                            <name>Dr. Elara Voss</name>
                            <credibility>high</credibility>
                        </witness>
                        <witness>
                            <name>Marcus Chen</name>
                            <!-- credibility omitted — optional field absent -->
                        </witness>
                    </witnesses>
                </lastSighting>
                <description><![CDATA[Appeared at <midnight> & vanished "instantly" — left no trace]]></description>
            </ghost>
        </ns:createGhostResponse>
    </soapenv:Body>
</soapenv:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             2. SOAP 1.1 — Custom prefix (SOAP-ENV) + nillable fields
             ═══════════════════════════════════════════════════════════════ -->
<SOAP-ENV:Envelope
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:ns="http://org.khorum-oss.com/ghost-book"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<SOAP-ENV:Body>
    <ns:getGhostResponse>
        <ghost>
            <type>apparition</type>
            <name>The Whisperer</name>
            <!-- origin absent — truly optional, element not present -->
            <hauntingScore xsi:nil="true"/>
            <!-- no abilities — empty list produces no elements -->
            <lastSighting>
                <location>Basement</location>
                <timestamp>2025-03-22T23:01:00Z</timestamp>
                <witnesses/>
            </lastSighting>
        </ghost>
    </ns:getGhostResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             3. SOAP 1.1 — Minimal response (no header, single element)
             ═══════════════════════════════════════════════════════════════ -->
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:ns="http://org.khorum-oss.com/ghost-book">
<soap:Body>
    <ns:deleteGhostResponse>
        <success>true</success>
    </ns:deleteGhostResponse>
</soap:Body>
</soap:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             4. SOAP 1.1 — Fault response
             ═══════════════════════════════════════════════════════════════ -->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:ns="http://org.khorum-oss.com/ghost-book">
<soapenv:Body>
    <soapenv:Fault>
        <faultcode>soapenv:Server</faultcode>
        <faultstring>Ghost not found in registry</faultstring>
        <faultactor>http://org.khorum-oss.com/ghost-book/lookup</faultactor>
        <detail>
            <ns:errorCode>GHOST_404</ns:errorCode>
            <ns:retryable>false</ns:retryable>
            <ns:searchedRegistries>
                <ns:registry>primary</ns:registry>
                <ns:registry>archive</ns:registry>
            </ns:searchedRegistries>
        </detail>
    </soapenv:Fault>
</soapenv:Body>
</soapenv:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             5. SOAP 1.1 — Client fault (validation error)
             ═══════════════════════════════════════════════════════════════ -->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:ns="http://org.khorum-oss.com/ghost-book">
<soapenv:Body>
    <soapenv:Fault>
        <faultcode>soapenv:Client</faultcode>
        <faultstring>Invalid request: missing required field 'type'</faultstring>
        <detail>
            <ns:validationErrors>
                <ns:field name="type" reason="required"/>
                <ns:field name="name" reason="required"/>
            </ns:validationErrors>
        </detail>
    </soapenv:Fault>
</soapenv:Body>
</soapenv:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             6. SOAP 1.2 — Full happy-path response (prefix: env)
             ═══════════════════════════════════════════════════════════════ -->
<env:Envelope
xmlns:env="http://www.w3.org/2003/05/soap-envelope"
xmlns:ns="http://org.khorum-oss.com/ghost-book"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<env:Header>
    <ns:correlationId env:mustUnderstand="true">corr-88af-11ee</ns:correlationId>
</env:Header>

<env:Body>
    <ns:listGhostsResponse>
        <ghosts>
            <ghost>
                <type>shadow</type>
                <name>Umbra</name>
                <hauntingScore>42.0</hauntingScore>
                <ability level="5">Shadow Manipulation</ability>
            </ghost>
            <ghost>
                <type>banshee</type>
                <name>The Wailing One</name>
                <origin>Celtic Ruins</origin>
                <hauntingScore xsi:nil="true"/>
                <ability level="9">Death Wail</ability>
                <ability level="4">Precognition</ability>
            </ghost>
        </ghosts>
        <totalCount>2</totalCount>
    </ns:listGhostsResponse>
</env:Body>
</env:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             7. SOAP 1.2 — Fault with nested subcodes
             ═══════════════════════════════════════════════════════════════ -->
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"
              xmlns:ns="http://org.khorum-oss.com/ghost-book">
<env:Body>
    <env:Fault>
        <env:Code>
            <env:Value>env:Sender</env:Value>
            <env:Subcode>
                <env:Value>ns:InvalidGhostType</env:Value>
            </env:Subcode>
        </env:Code>
        <env:Reason>
            <env:Text xml:lang="en">The ghost type 'friendly' is not recognized</env:Text>
        </env:Reason>
        <env:Node>http://org.khorum-oss.com/ghost-book/validation</env:Node>
        <env:Role>http://org.khorum-oss.com/ghost-book/endpoint</env:Role>
        <env:Detail>
            <ns:validTypes>
                <ns:type>poltergeist</ns:type>
                <ns:type>apparition</ns:type>
                <ns:type>shadow</ns:type>
                <ns:type>banshee</ns:type>
                <ns:type>wraith</ns:type>
            </ns:validTypes>
        </env:Detail>
    </env:Fault>
</env:Body>
</env:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             8. SOAP 1.2 — Receiver (server-side) fault, minimal
             ═══════════════════════════════════════════════════════════════ -->
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
<env:Body>
    <env:Fault>
        <env:Code>
            <env:Value>env:Receiver</env:Value>
        </env:Code>
        <env:Reason>
            <env:Text xml:lang="en">Internal ghost registry unavailable</env:Text>
        </env:Reason>
    </env:Fault>
</env:Body>
</env:Envelope>


        <!-- ═══════════════════════════════════════════════════════════════
             9. Edge case — deeply nested structure + mixed content
             ═══════════════════════════════════════════════════════════════ -->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:ns="http://org.khorum-oss.com/ghost-book"
                  xmlns:geo="http://org.khorum-oss.com/geo">
<soapenv:Body>
    <ns:getHauntedLocationsResponse>
        <locations>
            <location>
                <name>Winchester Mystery House</name>
                <geo:coordinates>
                    <geo:latitude>37.3184</geo:latitude>
                    <geo:longitude>-121.9511</geo:longitude>
                    <geo:elevation unit="meters">58.0</geo:elevation>
                </geo:coordinates>
                <ghosts>
                    <ghost>
                        <type>apparition</type>
                        <name>Sarah Winchester</name>
                        <sightings>
                            <sighting floor="2" room="Séance Room">
                                <date>2024-10-31</date>
                                <description>
                                    <![CDATA[Translucent figure seen near the fireplace — "cold draft" reported by 3 visitors]]></description>
                            </sighting>
                            <sighting floor="3" room="Door to Nowhere">
                                <date>2025-01-01</date>
                            </sighting>
                        </sightings>
                    </ghost>
                </ghosts>
            </location>
        </locations>
    </ns:getHauntedLocationsResponse>
</soapenv:Body>
</soapenv:Envelope>